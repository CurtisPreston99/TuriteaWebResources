var pins;
function addIconOptions(a){Options="airfield airport alcohol-shop america-football art-gallery bakery bank bar baseball basketball beer bicycle building bus cafe camera campsite car cemetery cesium chemist cinema circle circle-stroked city clothing-store college commercial cricket cross dam danger disability dog-park embassy emergency-telephone entrance farm fast-food ferry fire-station fuel garden gift golf grocery hairdresser harbor heart heliport hospital ice-cream industrial land-use laundry library lighthouse lodging logging london-underground marker marker-stroked minefield mobilephone monument museum music oil-well park2 parking-garage parking park pharmacy pitch place-of-worship playground police polling-place post prison rail-above rail-light rail-metro rail rail-underground religious-christian religious-jewish religious-muslim restaurant roadblock rocket school scooter shop skiing slaughterhouse soccer square square-stroked star star-stroked suitcase swimming telephone tennis theatre toilets town-hall town triangle triangle-stroked village warehouse waste-basket water wetland zoo".split(" ");var b=
"",c;for(c in Options)b+="<option value="+Options[c]+">"+Options[c]+"</option>";$("#"+a).html(b)}
function getallData(){var a={};0!==$("#summerNotePin").length?(a.name=document.getElementById("nameAd").value,a.tag_type=document.getElementById("iconSelectAd").value,a.lon=parseFloat($("#longTextAd")[0].value),a.lat=parseFloat($("#latTextAd")[0].value),a.color=document.getElementById("colorSelectorsAd").value,a.uid=parseInt($("#pinIdAd")[0].value)):(a.name=document.getElementById("name").value,a.tag_type=document.getElementById("iconSelect").value,a.lon=parseFloat($("#longText")[0].value),a.lat=
parseFloat($("#latText")[0].value),a.color=document.getElementById("colorSelectors").value,a.uid=parseInt($("#pinId")[0].value),a.description=$("#description")[0].value);a.time=18711;return a}
function deletePin(){var a=$(".cesium-infoBox-iframe")[0].contentDocument.getElementById("inDescription");null===a&&error("No Select","Please select a pin thank you");var b=a.innerText;$.get("../api/delete?type=2&id="+b,function(a){viewer.entities.removeById(b)}).fail(function(a){error("Not login","Please login thank you")})}
function submitPin(){if(null===temPin){var a=getallData(),b={};b.data="["+JSON.stringify(a)+"]";b.num=1;$.post("../api/update?type=2",b,function(){var a=$("#pin-dialog");0!==a.length&&a.dialog("close");viewer.entities.removeById("tem");temPin=null;loadpins()}).fail(function(a){error("Not login or other error","Please login thank you or check other things!")})}else a=getallData(),b={},b.data="["+JSON.stringify(a)+"]",$.post("../api/addPins?num=1",b,function(){loadpins();temPin=null;viewer.entities.removeById("tem");
$("#lon").text(0);$("#lat").text(0)}).fail(function(a){error("Not login or other error","Please login thank you or check other things!")}),a=$("#pin-dialog"),0!==a.length&&a.dialog("close")}function toAdvancePins(){localStorage.setItem("editPin",JSON.stringify(getallData()));null!==temPin?localStorage.setItem("mode","add"):localStorage.setItem("mode","update");window.location.href="../html/settings.html#tabs-1"}
function submitPinAd(){var a={},b=getallData(),c=editor.summernote("code");c=$("<p></p>").append($.parseHTML(c));for(var g=c.find("img"),e=[],f=0;f<g.length;f++){var d=g[f],k=d.dataset.filename;d=$(d);var h=d.attr("src");h.startsWith("data:")&&(e.push({image:h.split(",")[1],title:k}),d.attr("src","../api/getImage?id=%x"))}a.images=JSON.stringify(e);a.imageNum=e.length;a.pins=JSON.stringify([b]);a.articles=JSON.stringify([{sum:"pin name:"+b.name+" at longitude: "+b.lon.toString().substring(0,7)+", latitude: "+
b.lat.toString().substring(0,7)}]);a.content=c.html();$.post("../api/addPinWithArticle",a,function(a){localStorage.setItem("editPin",null);localStorage.setItem("viewerMiddle",JSON.stringify({lat:b.lat,lon:b.lon}));window.location.href="../html/home.html"}).fail(function(a){error("Not login or other error","Please login thank you or check other things!")})};